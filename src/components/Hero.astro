---
import { initGLBScene } from '../scripts/load-glb-model.js';
---

<section class="relative w-screen h-screen flex flex-col justify-end items-center overflow-hidden">
  <div id="model-3d-container" class="absolute inset-0 w-full h-full z-0"></div>

  <div class="relative w-full h-auto z-10 flex flex-col gap-2 p-2 text-center pb-8 text-gray-800">
    <h1 class="text-2xl lg:text-5xl font-bold">
      Luisa Fernanda Giraldo Murillo
    </h1>
    <p class="pb-8">
      Magíster Interdisciplinar en Teatro y Artes Vivas y estudiante del Doctorado en Arte y Arquitectura
    </p>
  </div>
</section>

<script type="module">
  import { initGLBScene } from '/src/scripts/load-glb-model.js';

  (async () => {
    const container = document.getElementById('model-3d-container');
    if (!container) return console.error('[Hero] No se encontró el contenedor');

    container.style.width = '100vw';
    container.style.height = '100vh';

    try {
      const base = window.location.hostname === 'localhost'
        ? '/'
        : '/luisagiraldoportfolio/';
      const modelPath = `${base}models/mapa-colombia.glb`;
      console.log('[Hero] Cargando modelo desde:', modelPath);

      const scene = await initGLBScene(container, modelPath);
      window.threeScene = scene;
    } catch (err) {
      console.error('[Hero] ❌ Error al inicializar escena 3D:', err);
      const msg = document.createElement('div');
      msg.textContent = `Error: ${err.message}`;
      msg.style.position = 'absolute';
      msg.style.top = '50%';
      msg.style.left = '50%';
      msg.style.transform = 'translate(-50%, -50%)';
      msg.style.color = 'white';
      msg.style.background = 'red';
      msg.style.padding = '1rem';
      container.appendChild(msg);
    }
  })();

  window.addEventListener('beforeunload', () => {
    const scene = window.threeScene;
    if (scene?.dispose) scene.dispose();
  });
</script>

