<section class="relative w-screen h-[100dvh] flex flex-col justify-end items-center overflow-hidden">
  <div id="model-3d-container" class="absolute inset-0 w-full h-full z-0"></div>

  <div class="relative w-full z-10 flex flex-col gap-2 p-2 text-center pb-8 text-gray-800">
    <h1 class="text-2xl lg:text-5xl font-bold">
      Luisa Fernanda Giraldo Murillo
    </h1>
    <p>
      Mag√≠ster Interdisciplinar en Teatro y Artes Vivas y estudiante del Doctorado en Arte y Arquitectura
    </p>
  </div>
</section>

<script type="module">
  import { initGLBScene } from '/src/scripts/load-glb-model.js';

  (async () => {
    const container = document.getElementById('model-3d-container');
    if (!container) return;

    const rect = container.getBoundingClientRect();
    if (rect.width === 0 || rect.height === 0) {
      container.style.minHeight = '320px';
    }

    try {
      // Usar import.meta.env.BASE_URL para obtener la base path
      const base = import.meta.env.BASE_URL || '/';
      const modelPath = `${base}models/mapa-colombia.glb`.replace(/\/+/g, '/');
      
      console.log('[Hero] Cargando modelo desde:', modelPath);
      
      const scene = await initGLBScene(container, modelPath);
      window.threeScene = scene;
      console.log('[Hero] Modelo 3D cargado correctamente');
    } catch (err) {
      console.error('[Hero] Error al cargar el modelo:', err);
      const errEl = document.createElement('div');
      errEl.style.cssText = 'position:absolute;left:8px;top:8px;background:#ffcdd2;color:#b71c1c;padding:8px;border-radius:6px;z-index:50;';
      errEl.textContent = 'Error 3D: ' + err.message;
      container.appendChild(errEl);
    }
  })();

  window.addEventListener('beforeunload', () => {
    const scene = window.threeScene;
    if (scene && scene.dispose) scene.dispose();
  });
</script>
