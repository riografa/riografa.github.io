---
// Hero.astro
---

<section class="relative w-screen h-screen flex flex-col justify-end items-center overflow-hidden">
  <div id="model-3d-container" class="absolute inset-0 w-full h-full z-0"></div>

  <div class="relative w-full h-auto z-10 flex flex-col gap-2 p-2 text-center pb-8 text-gray-800">
    <h1 class="text-2xl lg:text-5xl font-bold">
      Luisa Fernanda Giraldo Murillo
    </h1>
    <p class="pb-8">
      Mag√≠ster Interdisciplinar en Teatro y Artes Vivas y estudiante del Doctorado en Arte y Arquitectura
    </p>
  </div>
</section>

<script type="module">
  // ‚úÖ RUTA RELATIVA - CR√çTICO
  import { initGLBScene } from '../scripts/load-glb-model.js';

  (async () => {
    const container = document.getElementById('model-3d-container');
    
    if (!container) {
      console.error('[Hero] ‚ùå Contenedor no encontrado');
      return;
    }

    console.log('[Hero] ‚úÖ Contenedor encontrado');

    container.style.position = 'fixed';
    container.style.top = '0';
    container.style.left = '0';
    container.style.width = '100vw';
    container.style.height = '100vh';
    container.style.zIndex = '0';

    try {
      const modelPath = '/models/mapa-colombia.glb';
      
      console.log('[Hero] üöÄ Cargando modelo');
      console.log('[Hero] üìç Ruta:', modelPath);
      console.log('[Hero] üåê URL:', window.location.origin + modelPath);
      
      const scene = await initGLBScene(container, modelPath);
      window.threeScene = scene;
      
      console.log('[Hero] ‚úÖ‚úÖ‚úÖ MODELO CARGADO');
      
    } catch (err) {
      console.error('[Hero] ‚ùå Error:', err.message);
      
      const errorEl = document.createElement('div');
      errorEl.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(220, 38, 38, 0.98);
        color: white;
        padding: 30px;
        border-radius: 12px;
        z-index: 100;
        max-width: 600px;
        font-family: monospace;
        border: 3px solid #ff6b6b;
      `;
      
      errorEl.innerHTML = `
        <h3>‚ùå Error Cargando Modelo 3D</h3>
        <p><strong>Error:</strong> ${err.message}</p>
        <p><strong>URL:</strong> ${window.location.origin}/models/mapa-colombia.glb</p>
        <button onclick="this.parentElement.remove()" style="
          margin-top: 20px;
          padding: 12px 24px;
          background: #ff6b6b;
          border: none;
          border-radius: 6px;
          color: white;
          cursor: pointer;
        ">Cerrar</button>
      `;
      container.appendChild(errorEl);
    }
  })();

  window.addEventListener('beforeunload', () => {
    if (window.threeScene?.dispose) {
      window.threeScene.dispose();
    }
  });
</script>

<style>
  #model-3d-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
  }
</style>
